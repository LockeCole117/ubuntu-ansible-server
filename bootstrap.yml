---
- hosts: all
  vars_files:
    - vars.yml
  roles:
  - { role: common }
  - { role: logentries }
  - { role: common-logentries }

- hosts: webserver
  roles:
  - { role: nginx }
  - { role: nginx-logentries }
  vars_files:
    - vars.yml

- hosts: staticsite
  roles:
  - { role: staticsite-base }
  - { role: staticsite-nginx }
  - { role: staticsite-logentries }
  vars_files:
    - vars.yml
    - staticsite_vars.yml

- hosts: railsapp
  roles:
  - { role: ruby-2.1.2 }
  - { role: unicorn }
  - { role: postgresql }
  - { role: imagemagick }
  vars_files:
    - vars.yml
    - railsapp_vars.yml
    - "environments/production.yml"